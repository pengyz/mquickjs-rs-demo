// Generated by ridl-tool. DO NOT EDIT.

#[allow(non_snake_case)]
mod __ridl_agg_symbols {
    // NOTE: use a function pointer type so the keepalive table is `Sync`.
    type JsCFunction = unsafe extern "C" fn(
        ctx: *mut mquickjs_rs::mquickjs_ffi::JSContext,
        this_val: mquickjs_rs::mquickjs_ffi::JSValue,
        argc: i32,
        argv: *mut mquickjs_rs::mquickjs_ffi::JSValue,
    ) -> mquickjs_rs::mquickjs_ffi::JSValue;

    // externs for all js_* functions
{%- for module in modules %}
{%- for f in module.functions %}
    unsafe extern "C" {
        pub fn js_{{ f.name|lower }}(ctx: *mut mquickjs_rs::mquickjs_ffi::JSContext, this_val: mquickjs_rs::mquickjs_ffi::JSValue, argc: i32, argv: *mut mquickjs_rs::mquickjs_ffi::JSValue) -> mquickjs_rs::mquickjs_ffi::JSValue;
    }
{%- endfor %}

{%- for i in module.interfaces %}
{%- for m in i.methods %}
    unsafe extern "C" {
        pub fn js_{{ i.name|lower }}_{{ m.name|lower }}(ctx: *mut mquickjs_rs::mquickjs_ffi::JSContext, this_val: mquickjs_rs::mquickjs_ffi::JSValue, argc: i32, argv: *mut mquickjs_rs::mquickjs_ffi::JSValue) -> mquickjs_rs::mquickjs_ffi::JSValue;
    }
{%- endfor %}
{%- endfor %}

{%- for c in module.classes %}
{%- for m in c.methods %}
    unsafe extern "C" {
        pub fn js_{{ c.module_name|normalize_ident|lower }}_class_{{ c.name|lower }}_{{ m.name|lower }}(ctx: *mut mquickjs_rs::mquickjs_ffi::JSContext, this_val: mquickjs_rs::mquickjs_ffi::JSValue, argc: i32, argv: *mut mquickjs_rs::mquickjs_ffi::JSValue) -> mquickjs_rs::mquickjs_ffi::JSValue;
    }
{%- endfor %}
{%- endfor %}
{%- endfor %}

    #[used]
    #[allow(non_upper_case_globals)]
    pub static __ridl_keepalive_ptrs: [JsCFunction; 0
{%- for module in modules %}
+ {{ module.functions|length }}
+ {{ module.interfaces|methods_total_filter(module.classes) }}
{%- endfor %}
] = [
{%- for module in modules %}
{%- for f in module.functions %}
        js_{{ f.name|lower }},
{%- endfor %}
{%- for i in module.interfaces %}
{%- for m in i.methods %}
        js_{{ i.name|lower }}_{{ m.name|lower }},
{%- endfor %}
{%- endfor %}
{%- for c in module.classes %}
{%- for m in c.methods %}
        js_{{ c.module_name|normalize_ident|lower }}_class_{{ c.name|lower }}_{{ m.name|lower }},
{%- endfor %}
{%- endfor %}
{%- endfor %}
    ];
}

#[inline(always)]
pub fn ensure_symbols() {
    // Force reference to keepalive table so the linker keeps referenced symbols.
    let _ = __ridl_agg_symbols::__ridl_keepalive_ptrs.as_ptr();
}
