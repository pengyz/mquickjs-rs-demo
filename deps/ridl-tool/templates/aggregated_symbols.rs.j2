// Generated symbol references for RIDL extensions
//
// This file is generated in the aggregator crate (mquickjs-demo) and must not
// `use crate::generated::glue::*`, otherwise it can cause duplicate symbol
// definitions. Instead, we declare all glue entrypoints as extern symbols and
// take their addresses to force the linker to keep them.

// Avoid local type aliases to keep the file minimal and warning-free.

{%- for function in functions %}
unsafe extern "C" {
    fn js_{{ function.name|lower }}(
        ctx: *mut mquickjs_rs::mquickjs_ffi::JSContext,
        this_val: mquickjs_rs::mquickjs_ffi::JSValue,
        argc: i32,
        argv: *mut mquickjs_rs::mquickjs_ffi::JSValue,
    ) -> mquickjs_rs::mquickjs_ffi::JSValue;
}
{%- endfor %}

{%- for interface in interfaces %}
{%- for method in interface.methods %}
unsafe extern "C" {
    fn js_{{ interface.name|lower }}_{{ method.name|lower }}(
        ctx: *mut mquickjs_rs::mquickjs_ffi::JSContext,
        this_val: mquickjs_rs::mquickjs_ffi::JSValue,
        argc: i32,
        argv: *mut mquickjs_rs::mquickjs_ffi::JSValue,
    ) -> mquickjs_rs::mquickjs_ffi::JSValue;
}
{%- endfor %}
{%- endfor %}

pub fn ensure_symbols() {
{%- for function in functions %}
    let _ = js_{{ function.name|lower }} as unsafe extern "C" fn(
        *mut mquickjs_rs::mquickjs_ffi::JSContext,
        mquickjs_rs::mquickjs_ffi::JSValue,
        i32,
        *mut mquickjs_rs::mquickjs_ffi::JSValue,
    ) -> mquickjs_rs::mquickjs_ffi::JSValue;
{%- endfor %}
{%- for interface in interfaces %}
{%- for method in interface.methods %}
    let _ = js_{{ interface.name|lower }}_{{ method.name|lower }} as unsafe extern "C" fn(
        *mut mquickjs_rs::mquickjs_ffi::JSContext,
        mquickjs_rs::mquickjs_ffi::JSValue,
        i32,
        *mut mquickjs_rs::mquickjs_ffi::JSValue,
    ) -> mquickjs_rs::mquickjs_ffi::JSValue;
{%- endfor %}
{%- endfor %}
}
