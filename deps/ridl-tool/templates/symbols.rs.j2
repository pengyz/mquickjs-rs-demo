// Generated symbol references for RIDL extensions
// NOTE: We intentionally avoid `use mquickjs_rs::mquickjs_ffi::{JSContext, JSValue}` here.
// The only goal is to reference glue entrypoints to keep them linked.

{%- for function in functions %}
use crate::generated::glue::js_{{ function.name|lower }};
{%- endfor %}
{%- for interface in interfaces %}
{%- for method in interface.methods %}
use crate::generated::glue::js_{{ interface.name|lower }}_{{ method.name|lower }};
{%- endfor %}
{%- endfor %}

// Use all glue functions to ensure they're linked
pub fn ensure_symbols() {
{%- for function in functions %}
    let _ = js_{{ function.name|lower }} as unsafe extern "C" fn(*mut mquickjs_rs::mquickjs_ffi::JSContext, mquickjs_rs::mquickjs_ffi::JSValue, i32, *mut mquickjs_rs::mquickjs_ffi::JSValue) -> mquickjs_rs::mquickjs_ffi::JSValue;
{%- endfor %}
{%- for interface in interfaces %}
{%- for method in interface.methods %}
    let _ = js_{{ interface.name|lower }}_{{ method.name|lower }} as unsafe extern "C" fn(*mut mquickjs_rs::mquickjs_ffi::JSContext, mquickjs_rs::mquickjs_ffi::JSValue, i32, *mut mquickjs_rs::mquickjs_ffi::JSValue) -> mquickjs_rs::mquickjs_ffi::JSValue;
{%- endfor %}
{%- endfor %}
}